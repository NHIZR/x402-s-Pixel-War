# 用户手册

x402's Pixel War 完整使用指南 - 从新手到专家。

---

## 📚 目录

- [游戏简介](#游戏简介)
- [快速开始](#快速开始)
- [游戏界面](#游戏界面)
- [基本操作](#基本操作)
- [高级功能](#高级功能)
- [经济系统](#经济系统)
- [策略技巧](#策略技巧)
- [常见问题](#常见问题)

---

## 游戏简介

### 什么是 x402's Pixel War？

x402's Pixel War 是一个基于 Solana 区块链的多人像素征服游戏。玩家通过支付 x402 代币（USDC）来占领像素，每次占领后价格上涨 20%。

### 核心玩法

1. **连接钱包** - 使用 Solana 钱包登录
2. **选择像素** - 点击或拖动选择像素
3. **支付占领** - 使用 USDC 占领像素
4. **赚取利润** - 当别人占领你的像素时获得 110% 回报
5. **实时竞争** - 与全球玩家实时互动

### 游戏特色

- 🎮 **100×56 像素网格** - 5,600 个像素的战场
- 💰 **动态定价** - 价格随征服次数递增 20%
- 🎨 **自定义颜色** - 创造你的像素艺术
- ⚡ **实时同步** - 毫秒级更新，全球同步
- 📦 **批量占领** - 一次性占领多个像素
- 🔄 **免费换色** - 为自己的像素免费更换颜色
- ✏️ **文字工具** - 将文字渲染为像素艺术

---

## 快速开始

### 第 1 步：安装钱包

推荐钱包（选择其一）：
1. **Phantom** - https://phantom.app/
2. **Solflare** - https://solflare.com/
3. **Torus** - https://tor.us/

**安装步骤**（以 Phantom 为例）：
1. 访问 https://phantom.app/
2. 点击 "Download"
3. 选择浏览器扩展（Chrome/Firefox/Edge）
4. 安装并创建新钱包
5. **保存助记词**（非常重要！）

### 第 2 步：切换到 Devnet（测试网）

1. 打开 Phantom 钱包
2. 点击右上角设置图标 ⚙️
3. 点击 "Developer Settings"
4. 选择 "Change Network"
5. 选择 "Devnet"

### 第 3 步：获取测试代币

#### 获取测试 SOL
1. 访问 https://faucet.solana.com/
2. 粘贴你的钱包地址
3. 点击 "Airdrop 1 SOL"
4. 等待 5-10 秒，刷新钱包

#### 获取测试 USDC
参考 [钱包设置指南](WALLET_SETUP.md) 获取详细步骤。

### 第 4 步：访问游戏

1. 访问游戏网站（开发环境: http://localhost:3000）
2. 点击右上角 "Connect Wallet"
3. 选择你的钱包（Phantom/Solflare）
4. 授权连接
5. 开始游戏！

---

## 游戏界面

### 主界面布局

```
┌──────────────────────────────────────────────────────────┐
│  🎮 x402's Pixel War  [钱包地址] [余额] [文字工具]       │  ← 顶部栏
├──────────────────────────────────────────────────────────┤
│                                                          │
│         ┌────────────────────────────────┐              │
│         │                                │              │
│         │      100×56 像素网格           │              │  ← 主游戏区
│         │                                │              │
│         └────────────────────────────────┘              │
│                                                          │
│  [已选择: N 个像素] [批量占领]                           │  ← 底部操作栏
└──────────────────────────────────────────────────────────┘
```

### 顶部信息栏

- **游戏标题**: x402's Pixel War
- **钱包地址**: 显示已连接的钱包地址（简写）
- **USDC 余额**: 当前可用余额
- **连接/断开按钮**: 管理钱包连接
- **文字工具按钮**: 打开文字绘制工具

### 像素网格

- **大小**: 100 列 × 56 行 = 5,600 个像素
- **颜色**: 每个像素显示当前颜色
- **悬停**: 鼠标悬停显示坐标和价格
- **点击**: 点击像素查看详情

### 底部操作栏

- **选择计数**: 显示已选择的像素数量
- **批量占领按钮**: 对选中的像素执行批量操作

---

## 基本操作

### 1. 连接钱包

**步骤**:
1. 点击右上角 "Connect Wallet"
2. 在弹出的窗口中选择你的钱包
3. 在钱包弹窗中点击 "连接"
4. 看到钱包地址和余额后连接成功

**注意事项**:
- 确保钱包已切换到正确的网络（Devnet/Mainnet）
- 首次连接需要授权
- 刷新页面后可能需要重新连接

### 2. 占领单个像素

**步骤**:
1. 点击任意像素
2. 弹出像素详情弹窗，显示：
   - 坐标 (x, y)
   - 当前颜色
   - 当前所有者（如果有）
   - 当前价格
   - 占领次数
3. 在颜色选择器中选择新颜色
4. 点击 "占领像素" 按钮
5. 钱包弹出确认交易
6. 确认后等待处理（1-2 秒）
7. 看到 "🎉 占领成功！" 提示

**自动行为**:
- 如果像素已被你拥有，显示 "🎨 免费换色" 按钮
- 点击免费换色，无需支付费用

### 3. 批量占领像素

**步骤**:
1. 按住 `Shift` 键
2. 有两种选择方式：
   - **点击选择**: 点击多个像素（保持按住 Shift）
   - **拖动选择**: 按住鼠标左键拖动框选区域
3. 选中的像素会高亮显示
4. 底部显示 "已选择: N 个像素"
5. 点击 "批量占领" 按钮
6. 弹出批量占领弹窗，显示：
   - 总选择: N 个
   - 可占领: X 个（排除已拥有的）
   - 已拥有: Y 个
   - 总费用: Z USDC
7. 选择颜色
8. 点击 "确认占领"
9. 等待处理完成

**智能跳过**:
- 已拥有的像素自动跳过，不扣费
- 只为新占领的像素支付费用
- 完成后显示详细统计

### 4. 免费换色

**单个像素换色**:
1. 点击你拥有的像素
2. 选择新颜色
3. 点击 "🎨 免费换色"
4. 无需支付，立即生效

**批量换色**:
1. 按住 Shift 选择多个你拥有的像素
2. 点击 "批量占领"
3. 系统自动识别为换色操作
4. 免费更新所有颜色

---

## 高级功能

### 文字工具

文字工具允许你将文字转换为像素艺术，一次性绘制到画布上。

**使用步骤**:
1. 点击顶部的 "文字工具" 按钮
2. 在输入框中输入要绘制的文字
3. 选择绘制模式：
   - **绘制**: 将文字像素添加到画布
   - **清除**: 将文字区域恢复为默认色
4. 选择文字颜色
5. 调整字体大小（影响像素密度）
6. 在预览区查看效果
7. 拖动定位到画布上的目标位置
8. 查看价格预估
9. 点击 "确认绘制" 完成操作

**特点**:
- 实时预览文字像素化效果
- 自动计算所需费用
- 支持拖拽定位
- 支持缩放调整

### 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Shift` + 点击 | 多选像素 |
| `Shift` + 拖动 | 框选区域 |
| `Esc` | 取消选择 |
| `Ctrl/Cmd` + 刷新 | 强制刷新网格 |

### 实时同步

游戏使用 Supabase Realtime 实现毫秒级同步：

**效果**:
- 其他玩家占领像素时，你的屏幕立即更新
- 无需手动刷新页面
- 支持多个浏览器窗口同时观看

**测试实时同步**:
1. 打开两个浏览器窗口
2. 连接不同的钱包
3. 在窗口 A 占领像素
4. 窗口 B 立即看到变化（< 500ms）

### 查看像素信息

点击任意像素查看详细信息：

```
┌────────────────────────────────┐
│  像素详情                       │
├────────────────────────────────┤
│  坐标: (25, 15)                │
│  颜色: #FF0000 [红色方块]      │
│  当前所有者: ABC...XYZ          │
│  当前价格: 0.025 USDC          │
│  占领次数: 8 次                │
│  最后占领: 2 分钟前             │
├────────────────────────────────┤
│  [颜色选择器]                  │
│  [占领像素] 或 [免费换色]      │
└────────────────────────────────┘
```

### 批量操作优化

**智能分类**:
- 自动识别哪些像素需要支付
- 哪些像素可以免费换色
- 哪些操作会失败（余额不足等）

**操作结果**:
```
🎉 操作成功！
✅ 占领: 44 个像素
⏭️ 跳过: 68 个 (已拥有)
💰 总支付: 0.88 USDC
```

---

## 经济系统

### 价格机制

#### 初始价格
- 所有像素初始价格: **0.01 USDC**

#### 价格递增规则
每次占领后价格上涨 **20%** (×1.2):

| 占领次数 | 价格 (USDC) | 累计投入 |
|---------|-------------|----------|
| 0       | 0.01        | 0        |
| 1       | 0.01        | 0.01     |
| 2       | 0.012       | 0.022    |
| 5       | 0.025       | 0.074    |
| 10      | 0.062       | 0.255    |
| 20      | 0.383       | 2.19     |
| 50      | 91.0        | 765      |
| 100     | 82,817      | 691,105  |

### 利润分配

当你的像素被别人占领时：

```
Alice 的像素 (价格: 1.0 USDC)
         ↓
      Bob 占领
         ↓
┌─────────────────────────────┐
│  Bob 支付: 1.0 USDC         │
├─────────────────────────────┤
│  → Alice 获得: 1.1 USDC     │  (110%)
│  → 平台收取: 0.1 USDC       │  (10% 战争税)
│  → 新价格: 1.2 USDC         │  (×1.2)
└─────────────────────────────┘

Alice 净利润: +0.1 USDC (10%)
```

### 盈利策略

#### 策略 1: 早期占领（低成本）
- 占领初始价格像素（0.01 USDC）
- 等待被占领，赚取 0.001 USDC 利润
- **风险低**，但利润也低

#### 策略 2: 热门区域（高流动）
- 占领经常被争夺的像素
- 快速回本，频繁获利
- **风险中**，竞争激烈

#### 策略 3: 创作艺术（长期持有）
- 创造像素画作
- 吸引其他玩家
- 部分像素被占领时获利
- **风险低**，趣味性高

#### 策略 4: 投机高价（高风险高收益）
- 占领高价像素
- 等待土豪接盘
- **风险高**，可能砸手里

### 成本计算

**单个像素成本**:
```
当前价格 = 初始价格 × (1.2 ^ 占领次数)
```

**批量占领成本**:
```
总成本 = Σ(每个像素的当前价格)
```

**预期回报** (被占领时):
```
回报 = 当前价格 × 1.1
利润 = 回报 - 当前价格 = 当前价格 × 0.1
```

---

## 策略技巧

### 新手策略

1. **从便宜开始**
   - 占领初始价格像素（0.01 USDC）
   - 熟悉操作流程
   - 风险最低

2. **批量占领节省时间**
   - 使用 Shift + 拖动
   - 一次占领 10-20 个像素
   - 形成连贯图案

3. **选择活跃区域**
   - 观察哪些区域经常被占领
   - 在附近占领像素
   - 提高被占领概率

### 中级策略

1. **创建像素画**
   - 设计简单图案（心形、笑脸等）
   - 使用批量占领快速绘制
   - 吸引其他玩家注意

2. **混合持有**
   - 部分低价像素（快速回本）
   - 部分中价像素（平衡）
   - 少量高价像素（博高收益）

3. **跟踪竞争对手**
   - 观察活跃玩家的策略
   - 在他们的领地附近占领
   - 形成竞争关系

### 高级策略

1. **计算投资回报率**
   ```
   ROI = (预期回报 - 成本) / 成本
   ROI = (价格×1.1 - 价格) / 价格 = 10%
   ```
   每次占领都能获得 10% 利润

2. **流动性分析**
   - 记录每个像素的占领频率
   - 优先占领高流动性像素
   - 快速回本，降低风险

3. **防守策略**
   - 创建大面积连续区域
   - 增加对手占领成本
   - 维护领地完整性

4. **套利机会**
   - 发现价格异常像素
   - 低价买入，等待升值
   - 类似股市操作

### 团队协作

如果有多个玩家协作：

1. **分工占领**
   - 划分区域
   - 协同绘制图案
   - 共同防守

2. **资金池**
   - 集资占领高价像素
   - 收益按比例分配
   - 分散风险

3. **战略布局**
   - 占领关键位置
   - 阻断对手扩张
   - 控制热门区域

---

## 常见问题

### Q1: 我的钱包连接不上？

**A**: 检查以下几点：
1. 钱包是否安装正确
2. 网络是否切换到 Devnet（或对应网络）
3. 浏览器是否允许弹窗
4. 尝试刷新页面重新连接
5. 检查浏览器控制台是否有错误

### Q2: 余额显示为 0？

**A**:
1. 确认钱包中有 USDC 代币
2. 检查是否在正确的网络（Devnet/Mainnet）
3. 等待几秒钟让余额更新
4. 点击余额数字手动刷新

### Q3: 占领失败怎么办？

**A**: 常见失败原因：
- **余额不足**: 充值 USDC
- **网络问题**: 等待网络恢复
- **像素不存在**: 检查坐标范围
- **交易超时**: 重试操作

### Q4: 如何撤销选择？

**A**:
- 按 `Esc` 键取消所有选择
- 点击页面空白处
- 关闭批量占领弹窗

### Q5: 批量占领部分失败？

**A**:
这是正常的，可能原因：
- 部分像素已被你拥有（自动跳过）
- 部分像素在同一时间被他人占领
- 查看详细结果了解每个像素的状态

### Q6: 换色需要多久生效？

**A**:
- 免费换色: 立即生效（< 1 秒）
- 网络同步: < 500ms
- 其他玩家看到: 几乎实时

### Q7: 如何查看我拥有的所有像素？

**A**:
目前正在开发用户统计面板，暂时可以：
1. 使用不同颜色占领
2. 记住大致区域
3. 查看数据库（开发者）

### Q8: 价格会降低吗？

**A**:
不会。价格只会上涨，不会下降。这是游戏的核心机制。

### Q9: 可以退款吗？

**A**:
不可以。所有交易都是最终的，无法撤销。请谨慎操作。

### Q10: 如何获得更多 USDC？

**A**:
- **Devnet**: 使用水龙头获取测试币
- **Mainnet**: 在交易所购买真实 USDC

### Q11: 游戏有手续费吗？

**A**:
- **占领费用**: 像素当前价格
- **战争税**: 10%（你被占领时）
- **Solana 手续费**: 极低（< 0.001 SOL）
- **换色费用**: 完全免费

### Q12: 数据会丢失吗？

**A**:
不会。所有数据存储在 Supabase 数据库中：
- 实时备份
- 高可用性
- 数据持久化

### Q13: 可以离线占领吗？

**A**:
不可以。游戏需要：
- 网络连接
- 钱包连接
- 实时同步

### Q14: 支持手机吗？

**A**:
部分支持：
- 手机钱包可用（如 Phantom Mobile）
- 触摸操作可用
- 但批量选择体验较差
- 推荐使用桌面浏览器

### Q15: 如何举报作弊？

**A**:
游戏使用智能合约和数据库锁：
- 不存在常见作弊方式
- 所有操作都是原子性的
- 如有疑问，查看区块链交易记录

---

## 游戏礼仪

### 建议做的事

✅ 创造有趣的像素画
✅ 尊重他人的创作
✅ 友好竞争
✅ 分享你的作品
✅ 帮助新手

### 不建议做的事

❌ 恶意破坏他人创作
❌ 垄断大片区域
❌ 使用机器人（虽然很难）
❌ 滥用批量操作
❌ 散布虚假信息

---

## 术语表

| 术语 | 说明 |
|------|------|
| **像素** | 游戏中的基本单位，可被占领 |
| **占领** | 支付费用获得像素所有权 |
| **换色** | 为已拥有的像素更换颜色 |
| **战争税** | 像素被占领时平台收取的 10% 费用 |
| **批量占领** | 一次性占领多个像素 |
| **实时同步** | 所有玩家同时看到相同状态 |
| **Devnet** | Solana 测试网络，使用测试代币 |
| **Mainnet** | Solana 主网，使用真实代币 |
| **USDC** | 美元稳定币，1 USDC = 1 USD |
| **x402** | 支付协议标准 |

---

## 获取帮助

### 技术支持

- **文档**: https://github.com/your-repo/docs
- **问题追踪**: https://github.com/your-repo/issues
- **Discord 社区**: [加入链接]
- **Twitter**: [@x402PixelWar]

### 贡献

欢迎贡献代码、报告 bug 或提出建议：
- Fork 项目
- 提交 Pull Request
- 报告 Issues

---

## 下一步

- [ ] 完成第一次占领
- [ ] 尝试批量占领
- [ ] 创建你的第一个像素画
- [ ] 赚取第一笔利润
- [ ] 加入社区分享经验

---

## 相关文档

- [快速开始指南](GETTING_STARTED.md)
- [API 文档](API.md)
- [钱包设置](WALLET_SETUP.md)
- [部署指南](DEPLOYMENT.md)

---

**祝你玩得开心！🎮**

**最后更新**: 2026-01-26
**版本**: v1.1
